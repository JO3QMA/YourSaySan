services:
  yousaysan:
    build:
      context: ..
      dockerfile: Dockerfile
      target: development
    volumes:
      - ..:/app:cached
      - bundle-cache:/app/vendor/bundle
    command: bash -lc "sleep infinity"
    environment:
      - RACK_ENV=development
      - VOICEVOX_HOST=http://voicevox:50021
      - REDIS_HOST=redis
    depends_on:
      - voicevox
      - redis
  voicevox:
    image: voicevox/voicevox_engine:cpu-latest
    ports:
      - "50021:50021"
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
volumes:
  bundle-cache:
